<html>
<head>
	<title></title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
	<style type="text/css">
		body {background: #333333;color:#FFFFFF;}
	</style>
	<style type="text/css">
		#ui-wrapper {overflow:hidden;width:100%;height:35px;position:relative;background:#ccc;box-shadow:0px 0px 11px #000}

		.section {
			position:absolute;
			opacity:.85;
			height:100%;
		}

		.section .dragbar{
		   background-color:black;
		   height:100%;
		   float: right;
		   width: 5px;
		   cursor: col-resize;
		}

		.section .section-body {
			height:100%;
			cursor:grab;
			cursor:-webkit-grab;
			cursor:-moz-grab;
		}

		.section.dragging {
			z-index:999;
		}

		.section.dragging .section-body {
			cursor:grabbing;
			cursor:-webkit-grabbing;
			cursor:-moz-grabbing;
		}

		[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
  			display: none !important;
		}
	</style>
</head>
<body ng-app="slidesApp" ng-controller="slidesController">
	<div class="container" ng-cloak>
		<div class="row">
			<div class="col-lg-12">
				<p>
					<button class="btn btn-success" onclick="$('#ui-wrapper').multipleRangeInterface('addSection');">Add Section</button>
				</p>
			</div>
			<div class="col-lg-12">
				<div multiple-range-interface ng-model="interfaceData" id="ui-wrapper"></div>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<table class="table">
					<tr>
						<th>ID</th>
						<th>Start</th>
						<th>Stop</th>
					</tr>
					<tr ng-repeat="data in interfaceData">
						<td>{{data.id}}</td>
						<td>{{data.start}}</td>
						<td>{{data.stop}}</td>
					</tr>
				</table>
				<p>Click <code>Add Section</code> to add a new section and drag it around.</p>
			</div>
		</div>
	</div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.28/angular.min.js"></script>
	
	<script src="multiple-range-interface.js"></script>
	<script type="text/javascript">
		//$( "#ui-wrapper" ).multipleRangeInterface();
	</script>
	<script type="text/javascript">
		var slidesApp = angular.module('slidesApp', []);
		slidesApp.controller('slidesController', ['$scope', function($scope) {
			$scope.test = 'hi';
			//console.log($scope.interfaceData);
		}]);
		slidesApp.directive('multipleRangeInterface', function($parse) {
			return {
				replace: true,
				compile: function(element, attrs) {

					var modelAccessor = $parse(attrs.ngModel);

					return function(scope, element, attrs, controller) {
						element.multipleRangeInterface(
							{
								onChange:function() {
									var values = element.multipleRangeInterface('getValues');

									scope.$apply(function (scope) {
					                  // Change bound variable
					                  modelAccessor.assign(scope, values);
					               });
								}
							}
						);
					}
				}
			};
		});
	</script>
</body>
</html>